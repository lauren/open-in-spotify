// basic test
// show that it does the same thing by default as the shell.
function alphasort(a,b){return a=a.toLowerCase(),b=b.toLowerCase(),a>b?1:a<b?-1:0}function cleanResults(m){return m.map(function(m){return m.replace(/\/+/g,"/").replace(/\/$/,"")}).sort(alphasort).reduce(function(set,f){return f!==set[set.length-1]&&set.push(f),set},[]).sort(alphasort).map(function(f){return process.platform!=="win32"?f:f.replace(/^[a-zA-Z]:[\/\\]+/,"/").replace(/[\\\/]+/g,"/")})}var tap=require("tap"),child_process=require("child_process"),bashResults=require("./bash-results.json"),globs=Object.keys(bashResults),glob=require("../"),path=require("path");process.chdir(path.resolve(__dirname,"..")),globs.forEach(function(pattern){var expect=bashResults[pattern];if(process.platform==="win32"&&expect.some(function(m){return/\/symlink\//.test(m)}))return;tap.test(pattern,function(t){glob(pattern,function(er,matches){if(er)throw er;matches=cleanResults(matches),t.deepEqual(matches,expect,pattern),t.end()})}),tap.test(pattern+" sync",function(t){var matches=cleanResults(glob.sync(pattern));t.deepEqual(matches,expect,"should match shell"),t.end()})});