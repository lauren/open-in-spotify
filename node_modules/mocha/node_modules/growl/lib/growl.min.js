// Growl - Copyright TJ Holowaychuk <tj@vision-media.ca> (MIT Licensed)
/**
 * Module dependencies.
 */function which(name){var paths=process.env.PATH.split(":"),loc;for(var i=0,len=paths.length;i<len;++i){loc=path.join(paths[i],name);if(exists(loc))return loc}}function growl(msg,options,fn){var image,args,options=options||{},fn=fn||function(){};if(!cmd)return fn(new Error("growl not supported on this platform"));args=[cmd.pkg];if(image=options.image)switch(cmd.type){case"Darwin-Growl":var flag,ext=path.extname(image).substr(1);flag=flag||ext=="icns"&&"iconpath",flag=flag||/^[A-Z]/.test(image)&&"appIcon",flag=flag||/^png|gif|jpe?g$/.test(ext)&&"image",flag=flag||ext&&(image=ext)&&"icon",flag=flag||"icon",args.push("--"+flag,image);break;case"Linux":args.push(cmd.icon+" "+image),options.sticky||args.push("--hint=int:transient:1");break;case"Windows":args.push(cmd.icon+quote(image))}options.sticky&&args.push(cmd.sticky);if(options.priority){var priority=options.priority+"",checkindexOf=cmd.priority.range.indexOf(priority);~cmd.priority.range.indexOf(priority)&&args.push(cmd.priority,options.priority)}options.name&&cmd.type==="Darwin-Growl"&&args.push("--name",options.name);switch(cmd.type){case"Darwin-Growl":args.push(cmd.msg),args.push(quote(msg)),options.title&&args.push(quote(options.title));break;case"Darwin-NotificationCenter":args.push(cmd.msg),args.push(quote(msg)),options.title&&(args.push(cmd.title),args.push(quote(options.title))),options.subtitle&&(args.push(cmd.subtitle),args.push(quote(options.title)));break;case"Darwin-Growl":args.push(cmd.msg),args.push(quote(msg)),options.title&&args.push(quote(options.title));break;case"Linux":options.title?(args.push(quote(options.title)),args.push(cmd.msg),args.push(quote(msg))):args.push(quote(msg));break;case"Windows":args.push(quote(msg)),options.title&&args.push(cmd.title+quote(options.title))}exec(args.join(" "),fn)}var exec=require("child_process").exec,fs=require("fs"),path=require("path"),exists=fs.existsSync||path.existsSync,os=require("os"),quote=JSON.stringify,cmd;switch(os.type()){case"Darwin":which("terminal-notifier")?cmd={type:"Darwin-NotificationCenter",pkg:"terminal-notifier",msg:"-message",title:"-title",subtitle:"-subtitle",priority:{cmd:"-execute",range:[]}}:cmd={type:"Darwin-Growl",pkg:"growlnotify",msg:"-m",sticky:"--sticky",priority:{cmd:"--priority",range:[-2,-1,0,1,2,"Very Low","Moderate","Normal","High","Emergency"]}};break;case"Linux":cmd={type:"Linux",pkg:"notify-send",msg:"",sticky:"-t 0",icon:"-i",priority:{cmd:"-u",range:["low","normal","critical"]}};break;case"Windows_NT":cmd={type:"Windows",pkg:"growlnotify",msg:"",sticky:"/s:true",title:"/t:",icon:"/i:",priority:{cmd:"/p:",range:[-2,-1,0,1,2]}}}exports=module.exports=growl,exports.version="1.4.1";