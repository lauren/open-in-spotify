var mkdirp=require("../"),path=require("path"),fs=require("fs"),test=require("tap").test;test("sync perm",function(t){t.plan(2);var file="/tmp/"+(Math.random()*(1<<30)).toString(16)+".json";mkdirp.sync(file,493),path.exists(file,function(ex){ex?fs.stat(file,function(err,stat){err?t.fail(err):(t.equal(stat.mode&511,493),t.ok(stat.isDirectory(),"target not a directory"),t.end())}):t.fail("file not created")})}),test("sync root perm",function(t){t.plan(1);var file="/tmp";mkdirp.sync(file,493),path.exists(file,function(ex){ex?fs.stat(file,function(err,stat){err?t.fail(err):(t.ok(stat.isDirectory(),"target not a directory"),t.end())}):t.fail("file not created")})});