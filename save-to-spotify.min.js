(function(e){var t={ajaxRequest:function(e,t,n){var r=new XMLHttpRequest;r.onload=e,r.onerror=t,r.open("get",n),r.send()},searchForArtist:function(e,t,n){var r="http://ws.spotify.com/search/1/artist.json?q="+n.replace(/\s/g,"%20");this.ajaxRequest(e,t,r)},searchForTrack:function(e,t,n){var r="http://ws.spotify.com/search/1/track.json?q="+n.replace(/\s/g,"%20");this.ajaxRequest(e,t,r)}};e.spotifyQuerier=t})(typeof exports=="undefined"?this:exports),function(e){var t={htmlEl:document.getElementsByTagName("html")[0]};switch(window.location.hostname){case"songza.com":t.artist=document.getElementsByClassName("szi-artist")[0].innerHTML,t.track=document.getElementsByClassName("szi-song")[0].innerHTML,t.pauseButton=document.getElementsByClassName("szi-pause")[0],t.currentlyPlaying=document.getElementsByClassName("szi-player-state-play").length>0,spotifyQuerier.searchForTrack(function(){router.trackSearch(this.responseText)},showError,t.track);break;default:render.showUnsupportedSiteMessage()}}(typeof exports=="undefined"?this:exports),function(){var e={showTrackOptions:function(e){var n=r("large"),i=document.createElement("h2"),o=t();i.innerHTML="Matching Tracks on Spotify",n.appendChild(i),e.map(function(e){var t=document.createElement("li"),n=e.artists[0];t.innerHTML="<a href='"+e.href+"'>"+e.name+"</a> by <a href='"+n.href+"'>"+n.name+"</a> from the album "+"<em><a href='"+e.album.href+"'></em>"+e.album.name+"</a>.",o.appendChild(t)}),n.appendChild(o),s()},showArtistOptions:function(e){var n=r("large"),i=document.createElement("h2"),o=document.createElement("h3"),u=t();o.innerHTML="<p>Sorry! I couldn't find the exact track you're listening to on Spotify.</p>",n.appendChild(o),i.innerHTML="Matching Artists on Spotify",n.appendChild(i),e.map(function(e){var t=document.createElement("li");t.innerHTML="<a href='"+e.href+"'>"+e.name+"</a>",u.appendChild(t)}),n.appendChild(u),s()},showNotFoundMessage:function(){var e=r("small"),t=document.createElement("h2"),n=document.createElement("h3");t.innerHTML="Not Found",e.appendChild(t),n.innerHTML="<p>Sorry, I couldn't find the track '"+sourceSiteData.track+"' or the artist "+sourceSiteData.artist+" on Spotify.</p><p>Try again with the next song you like.</p>",e.appendChild(n)},showUnsupportedSiteMessage:function(){var e=r("small"),t=document.createElement("h2"),n=document.createElement("h3");t.innerHTML="Site Not Supported",e.appendChild(t),n.innerHTML="<p>Sorry, I can't save to spotify from "+window.location.hostname+".</p>"+"<p>Try adding a song from Songza, Pandora, or Turntable.fm.</p>",e.appendChild(n)},showError:function(e){var t=r("small"),n=document.createElement("h2"),i=document.createElement("h3");n.innerHTML="Can't connect to Spotify",t.appendChild(n),i.innerHTML="<p>Sorry, I can't connect to Spotify right now.</p><p>Try again with the next song you like.</p>"+e.target.status,t.appendChild(i)}},t=function(){var e=document.createElement("ul");return e.style.fontSize="20px",e},n=function(){document.body.removeChild(document.getElementById("add-to-spotify-overlay")),document.body.removeChild(document.getElementById("add-to-spotify-modal")),document.body.style.overflow="auto",sourceSiteData.htmlEl.style.overflow="auto",o()},r=function(e){var t=document.body.firstChild,r=document.createElement("div");r.id="add-to-spotify-modal",r.style.margin="auto auto",r.style.background="#fff",r.style.zIndex=1450,r.style.position="fixed",r.style.left="0",r.style.right="0",r.style.top="0",r.style.bottom="0",r.style.overflow="auto",r.style.width=e==="small"?"400px":"70%",r.style.height=e==="small"?"200px":"90%",r.style.borderRadius="5px";var s=document.createElement("div");s.id="close-spotify-modal",s.style.position="absolute",s.style.height="auto",s.style.width="auto",s.style.right="0",s.style.top="0",s.style.fontSize="40px",s.style.lineHeight="25px",s.style.padding="10px",s.style.borderLeft="1px solid #666",s.style.borderBottom="1px solid #666",s.style.borderRight="1px solid #666",s.style.cursor="pointer",s.innerHTML="&times;",r.appendChild(s);var o=document.createElement("div");o.id="add-to-spotify-modal-content",o.style.padding="15px",r.appendChild(o),document.body.insertBefore(r,t),i(s,"click",n);var u=document.createElement("div");return u.id="add-to-spotify-overlay",u.style.background="#000",u.style.opacity=.7,u.style.zIndex=1400,u.style.height=parseInt(window.screen.height+20,10)+"px",u.style.width="100%",u.style.marginTop="-15px",u.style.position="absolute",document.body.style.overflow="hidden",sourceSiteData.htmlEl.style.overflow="hidden",document.body.insertBefore(u,r),o},i=function(e,t,n){e.addEventListener?e.addEventListener(t,n):e.attachEvent(t,n)},s=function(){sourceSiteData.currentlyPlaying&&sourceSiteData.pauseButton.click()},o=function(){sourceSiteData.currentlyPlaying&&sourceSiteData.pauseButton.click()};exports.render=e}(),function(){Array.prototype.map===undefined&&(Array.prototype.map=function(e){var t=[];for(var n=0;n<this.length;n++)t.push(e(this[n]));return t}),Array.prototype.filter===undefined&&(Array.prototype.filter=function(e){var t=[];for(var n=0;n<this.length;n++)e(this[n],n,this)&&t.push(this);return t})}();